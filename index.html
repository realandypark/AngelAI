<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngelAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        :root {
            --red: #FD5C63;
            --red-light: #FFE8E9;
            --red-dark: #E84A51;
            --gray-50: #f9fafb;
            --gray-400: #9ca3af;
            --gray-600: #4b5563;
            --gray-900: #111827;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #f9fafb 0%, #f0f9fb 100%);
            color: var(--gray-900);
        }

        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            text-align: center;
            padding: 12px 8px;
            border-bottom: 1px solid rgba(253, 92, 99, 0.1);
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            flex-shrink: 0;
        }

        .logo {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(135deg, #FD5C63 0%, #E84A51 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 10px;
            color: var(--gray-400);
            margin-top: 2px;
        }

        .main-wrapper {
            display: flex;
            flex: 1;
            min-height: 0;
            gap: 12px;
            padding: 12px;
            overflow: hidden;
        }

        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(253, 92, 99, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(253, 92, 99, 0.08);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-header {
            padding: 14px;
            border-bottom: 1px solid rgba(253, 92, 99, 0.1);
            font-weight: 600;
            font-size: 13px;
        }

        .faq-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .faq-item {
            padding: 8px 10px;
            background: rgba(253, 92, 99, 0.05);
            border: 1px solid rgba(253, 92, 99, 0.1);
            border-radius: 10px;
            cursor: pointer;
            font-size: 11px;
            color: var(--gray-600);
            transition: all 0.2s ease;
            line-height: 1.3;
        }

        .faq-item:hover {
            background: rgba(253, 92, 99, 0.1);
            color: #FD5C63;
        }

        .faq-item.active {
            background: rgba(253, 92, 99, 0.15);
            border-color: #FD5C63;
            color: #FD5C63;
        }

        .sidebar-footer {
            padding: 10px;
            border-top: 1px solid rgba(253, 92, 99, 0.1);
        }

        .new-chat-btn {
            width: 100%;
            padding: 8px;
            background: linear-gradient(135deg, #FD5C63 0%, #E84A51 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(253, 92, 99, 0.1);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(253, 92, 99, 0.08);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            display: flex;
            gap: 8px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 80%;
            padding: 10px 12px;
            border-radius: 14px;
            font-size: 13px;
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .message.ai .message-bubble {
            background: rgba(253, 92, 99, 0.08);
            border: 1px solid rgba(253, 92, 99, 0.15);
            color: var(--gray-900);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, rgba(253, 92, 99, 0.15) 0%, rgba(253, 92, 99, 0.08) 100%);
            border: 1px solid rgba(253, 92, 99, 0.2);
            color: var(--gray-900);
        }

        .typing-indicator {
            display: flex;
            gap: 3px;
            padding: 8px 12px;
        }

        .typing-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: #FD5C63;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .option-btn {
            padding: 12px 14px;
            background: rgba(253, 92, 99, 0.08);
            border: 1.5px solid rgba(253, 92, 99, 0.15);
            border-radius: 12px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-600);
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(253, 92, 99, 0.04);
        }
        
        .option-btn:hover {
            background: rgba(253, 92, 99, 0.12);
            border-color: rgba(253, 92, 99, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(253, 92, 99, 0.12);
        }

        .option-btn:active {
            background: rgba(253, 92, 99, 0.18);
            border-color: #FD5C63;
            color: #FD5C63;
            transform: translateY(0);
        }

        .option-btn.selected {
            background: linear-gradient(135deg, rgba(253, 92, 99, 0.15) 0%, rgba(253, 92, 99, 0.1) 100%);
            border-color: #FD5C63;
            color: #FD5C63;
            font-weight: 600;
            box-shadow: 0 4px 16px rgba(253, 92, 99, 0.2);
        }

        .proceed-btn {
            padding: 12px 14px;
            background: linear-gradient(135deg, #FD5C63 0%, #E84A51 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            box-shadow: 0 4px 16px rgba(253, 92, 99, 0.25);
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .proceed-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253, 92, 99, 0.35);
        }

        .proceed-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .input-area {
            padding: 12px;
            border-top: 1px solid rgba(253, 92, 99, 0.1);
            display: flex;
            gap: 8px;
        }

        .input-wrapper {
            flex: 1;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px 10px;
            background: rgba(253, 92, 99, 0.05);
            border: 1px solid rgba(253, 92, 99, 0.15);
            border-radius: 10px;
            font-size: 13px;
            font-family: inherit;
            color: var(--gray-900);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: rgba(253, 92, 99, 0.3);
            background: rgba(253, 92, 99, 0.08);
        }

        .send-btn {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #FD5C63 0%, #E84A51 100%);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        @media (max-width: 600px) {
            .main-wrapper {
                flex-direction: column;
                gap: 4px;
                padding: 4px;
            }

            .sidebar {
                width: 100%;
                height: auto;
                max-height: 160px;
                flex-shrink: 0;
                order: 2;
            }

            .sidebar-header {
                padding: 10px;
                font-size: 12px;
            }

            .faq-list {
                flex-direction: row;
                overflow-x: auto;
                overflow-y: hidden;
                padding: 6px;
            }

            .faq-item {
                white-space: nowrap;
                flex-shrink: 0;
                font-size: 10px;
                padding: 8px 10px;
            }

            .chat-container {
                order: 1;
                flex: 1;
                min-height: 300px;
            }

            .message-bubble {
                max-width: 90%;
                font-size: 12px;
            }

            .option-btn {
                padding: 14px 16px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">AngelAI</div>
            <div class="tagline">Personalized skincare guide</div>
        </header>

        <div class="main-wrapper">
            <div class="sidebar">
                <div class="sidebar-header">FAQ</div>
                <div class="faq-list" id="faqList"></div>
                <div class="sidebar-footer">
                    <button class="new-chat-btn" onclick="startNewChat()">New Chat</button>
                </div>
            </div>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="input-area">
                    <div class="input-wrapper">
                        <input type="text" id="messageInput" placeholder="Ask me anything..." autocomplete="off">
                    </div>
                    <button class="send-btn" onclick="sendMessage()">‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { key: 'name', text: 'First, what\'s your name? (So I can call you by name! üíï)', options: [], textInput: true },
            { key: 'sex', text: 'What is your biological sex?', options: ['Female', 'Male', 'Non-binary / Prefer not to say'] },
            { key: 'age', text: 'What is your age group?', options: ['Under 18', '18-24', '25-34', '35-44', '45-54', '55+'] },
            { key: 'skinType', text: 'How would you describe your skin type?', options: ['Oily', 'Dry', 'Combination', 'Normal', 'Sensitive'] },
            { key: 'concerns', text: 'What are your main skin concerns? (Select up to 3)', options: ['Acne / Breakouts', 'Blackheads / Large pores', 'Dullness / Uneven tone', 'Redness / Sensitivity', 'Fine lines / Wrinkles', 'Hyperpigmentation / Dark spots', 'Dryness / Dehydration', 'Oil control'], multiSelect: true },
            { key: 'afterWash', text: 'How does your skin feel after cleansing?', options: ['Tight / Dry', 'Comfortable', 'Greasy quickly'] },
            { key: 'sunExposure', text: 'How often are you exposed to the sun?', options: ['Rarely (mostly indoors)', 'Occasionally (a few hours/week)', 'Frequently (daily outdoor exposure)'] },
            { key: 'climate', text: 'Where do you live? What\'s the weather usually like?', options: ['Cold & dry (winter weather, air conditioning)', 'Hot & humid (tropical, summer weather)', 'Moderate & balanced (mild year-round)'] },
            { key: 'stress', text: 'How much stress or sleep deprivation do you experience?', options: ['High stress, poor sleep', 'Moderate stress', 'Low stress, good sleep'] },
            { key: 'currentProducts', text: 'Which products do you already use?', options: ['Cleanser', 'Toner', 'Serum', 'Moisturizer', 'Sunscreen', 'Exfoliant (AHA/BHA)', 'Retinol / Retinoid', 'None'], multiSelect: true },
            { key: 'routineSteps', text: 'How many steps do you prefer in your routine?', options: ['Minimal (2-3 steps)', 'Moderate (4-5 steps)', 'Full routine (6+ steps)'] },
            { key: 'budget', text: 'What is your typical budget per product?', options: ['Under $20 (affordable)', '$20-$50 (mid-range)', '$50+ (premium)'] },
            { key: 'fragrance', text: 'Do you prefer fragrance-free products?', options: ['Fragrance-free', 'Lightly scented', 'No preference'] }
        ];

        const faqs = [
            { q: 'How does AngelAI work?', a: 'I\'m AngelAI! üíï\n\nI ask you 12 thoughtful questions about your skin, lifestyle, and preferences.\n\nBased on your answers, I create a personalized skincare routine with specific ingredients and steps designed just for you. My recommendations are grounded in dermatological research!' },
            { q: 'Is this medical advice?', a: 'No, my recommendations are educational skincare guidance based on dermatological research, not medical advice.\n\nIf you have persistent skin conditions, please consult a dermatologist. Your health and safety are everything to me! üè•' },
            { q: 'When will I see results?', a: 'Patience is beautiful, and consistency is key! ‚ú®\n\nMost people see visible improvements within 4-8 weeks of following their personalized routine regularly.\n\nDifferent concerns show results at different speeds. You\'re investing in your skin\'s long-term health!' },
            { q: 'I have sensitive skin!', a: 'Your sensitive skin deserves extra love! üíô\n\nI prioritize gentle, soothing ingredients like Centella Asiatica, Panthenol, and Ceramides.\n\nIntroduce products one at a time, always patch test, and listen to your skin. Your comfort is my priority.' },
            { q: 'Why is sunscreen important?', a: 'This is my biggest love letter to your skin! ‚òÄÔ∏è\n\nDaily sunscreen prevents premature aging, dark spots, and sun damage that accumulates over time.\n\nUV rays penetrate windows, so use it even indoors. SPF 50+ is amazing. Your future skin will thank you! ‚ù§Ô∏è' },
            { q: 'Can I combine ingredients?', a: 'I love your enthusiasm! üåü\n\nSome ingredients work beautifully together. Others need to be used at different times to prevent irritation.\n\nFor example, strong acids and retinoids should be used on separate nights. I\'ll guide you safely!' },
            { q: 'Do I need all steps?', a: 'Absolutely not! üôå\n\nStart with essentials: a gentle cleanser, a nourishing moisturizer, and sunscreen.\n\nOnce comfortable, add treatments gradually. There\'s no pressure to do everything at once!' },
            { q: 'Climate type explanation?', a: 'Great question! üåç\n\nDry/Cold: Winter climates or deserts - skin needs more hydration and heavier moisturizers.\n\nHumid/Tropical: Summer or rainforest climates - skin gets oily, need lighter products.\n\nModerate: Mild weather year-round - balanced routine works best.' }
        ];

        let currentQuestion = 0;
        let userResponses = {};

        function initChat() {
            currentQuestion = 0;
            userResponses = {};
            document.getElementById('chatMessages').innerHTML = '';
            document.getElementById('messageInput').value = '';
            
            addBotMessage('Hi there! I\'m AngelAI, your personal skincare companion. ‚ù§Ô∏è\n\nI\'m here to help you discover the perfect skincare routine tailored just for you.\n\nLet\'s get started!');
            setTimeout(() => showQuestion(), 1200);
            renderFAQ();
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                generateRecommendation();
                return;
            }

            const q = questions[currentQuestion];
            addBotMessage(q.text);
            
            // Handle text input questions (like name)
            if (q.textInput) {
                const lastMessage = document.querySelector('.message:last-child');
                lastMessage.querySelector('.message-bubble').innerHTML += '<div style="margin-top: 10px;"><input type="text" id="textAnswer" placeholder="Type your answer..." style="width: 100%; padding: 12px 14px; background: rgba(253, 92, 99, 0.08); border: 1.5px solid rgba(253, 92, 99, 0.15); border-radius: 12px; font-size: 13px; font-family: inherit; color: var(--gray-900);"><button class="proceed-btn" onclick="handleTextAnswer(' + currentQuestion + ')" style="margin-top: 8px;">Continue</button></div>';
                setTimeout(() => document.getElementById('textAnswer').focus(), 100);
                return;
            }
            
            const questionId = 'q' + currentQuestion;
            let optionsHtml = '<div class="options" data-question="' + questionId + '">';
            
            q.options.forEach((opt, idx) => {
                optionsHtml += '<button class="option-btn" data-option="' + opt + '" onclick="handleOption(' + currentQuestion + ', ' + idx + ', this)">' + opt + '</button>';
            });
            optionsHtml += '</div>';

            if (q.multiSelect) {
                optionsHtml += '<button class="proceed-btn" data-question="' + questionId + '" onclick="handleProceed(' + currentQuestion + ')" disabled>Select to continue</button>';
            }

            const lastMessage = document.querySelector('.message:last-child');
            lastMessage.querySelector('.message-bubble').innerHTML += optionsHtml;
            
            // Add explanation for climate question
            if (q.key === 'climate') {
                setTimeout(() => {
                    addBotMessage('Let me explain! üå°Ô∏è\n\n‚Ä¢ Cold & dry: If you use heating/AC a lot, or live in winter climates - your skin needs extra moisture\n\n‚Ä¢ Hot & humid: If you sweat often or live in tropical areas - your skin may get oilier\n\n‚Ä¢ Moderate: If your weather is balanced year-round - your skin stays pretty consistent');
                }, 300);
            }
        }

        function handleOption(qIdx, optIdx, btn) {
            const q = questions[qIdx];
            const option = q.options[optIdx];
            
            if (q.multiSelect) {
                btn.classList.toggle('selected');
                updateProceedButton(qIdx);
            } else {
                userResponses[q.key] = option;
                btn.classList.add('selected');
                addUserMessage(option);
                currentQuestion++;
                setTimeout(() => showQuestion(), 600);
            }
        }

        function handleTextAnswer(qIdx) {
            const q = questions[qIdx];
            const input = document.getElementById('textAnswer');
            const answer = input.value.trim();
            
            if (answer) {
                userResponses[q.key] = answer;
                addUserMessage(answer);
                currentQuestion++;
                setTimeout(() => showQuestion(), 600);
            }
        }

        function updateProceedButton(qIdx) {
            const questionId = 'q' + qIdx;
            const proceedBtn = document.querySelector('[data-question="' + questionId + '"].proceed-btn');
            const optionsDiv = document.querySelector('[data-question="' + questionId + '"].options');
            
            if (proceedBtn && optionsDiv) {
                const selected = optionsDiv.querySelectorAll('.option-btn.selected').length;
                if (selected > 0) {
                    proceedBtn.disabled = false;
                    proceedBtn.textContent = 'Continue (' + selected + ' selected)';
                } else {
                    proceedBtn.disabled = true;
                    proceedBtn.textContent = 'Select to continue';
                }
            }
        }

        function handleProceed(qIdx) {
            const q = questions[qIdx];
            const questionId = 'q' + qIdx;
            const optionsDiv = document.querySelector('[data-question="' + questionId + '"].options');
            
            if (optionsDiv) {
                const selectedBtns = optionsDiv.querySelectorAll('.option-btn.selected');
                const selectedOptions = [];
                selectedBtns.forEach(btn => {
                    selectedOptions.push(btn.getAttribute('data-option'));
                });
                
                if (selectedOptions.length > 0) {
                    userResponses[q.key] = selectedOptions;
                    addUserMessage(selectedOptions.join(', '));
                    currentQuestion++;
                    setTimeout(() => showQuestion(), 600);
                }
            }
        }

        function generateRecommendation() {
            addBotMessage('Analyzing your profile... ‚ú®');
            
            setTimeout(() => {
                const name = userResponses.name || 'friend';
                const sex = userResponses.sex || 'not specified';
                const age = userResponses.age || 'not specified';
                const skinType = userResponses.skinType || 'normal';
                const concerns = userResponses.concerns || [];
                const budget = userResponses.budget || 'mid-range';
                const stress = userResponses.stress || 'moderate stress';
                const sunExposure = userResponses.sunExposure || 'occasionally';

                addBotMessage('‚úÖ ' + name + ', here\'s your Profile Summary:\n\nSex: ' + sex + '\nAge: ' + age + '\nSkin Type: ' + skinType + '\nConcerns: ' + (concerns.length > 0 ? concerns.join(', ') : 'General maintenance'));

                setTimeout(() => {
                    let morningRoutine = '‚òÄÔ∏è Your Morning Routine:\n\n';
                    morningRoutine += '1. Cleanser: ';
                    if (skinType === 'Oily') {
                        morningRoutine += 'Foaming gel cleanser\n';
                    } else if (skinType === 'Dry') {
                        morningRoutine += 'Creamy hydrating cleanser\n';
                    } else {
                        morningRoutine += 'Gentle balancing cleanser\n';
                    }
                    
                    morningRoutine += '2. Treatment: Vitamin C or Niacinamide serum\n';
                    morningRoutine += '3. Moisturizer: ';
                    if (skinType === 'Oily') {
                        morningRoutine += 'Lightweight gel moisturizer\n';
                    } else if (skinType === 'Dry') {
                        morningRoutine += 'Rich cream with Ceramides\n';
                    } else {
                        morningRoutine += 'Balanced lotion moisturizer\n';
                    }
                    
                    morningRoutine += '4. SPF: SPF 50+ broad spectrum (reapply every 2 hours if outdoors)';
                    addBotMessage(morningRoutine);
                }, 800);

                setTimeout(() => {
                    let budgetMsg = 'üí∞ Product Recommendations:\n\n';
                    if (budget.includes('affordable')) {
                        budgetMsg += 'Affordable (<$20):\n‚Ä¢ Cleanser: CeraVe, Cetaphil\n‚Ä¢ Moisturizer: CeraVe, Vanicream\n‚Ä¢ Serum: The Ordinary\n‚Ä¢ Sunscreen: Neutrogena, Cetaphil\n‚Ä¢ Exfoliant: COSRX, The Ordinary';
                    } else if (budget.includes('mid-range')) {
                        budgetMsg += 'Mid-Range ($20-$50):\n‚Ä¢ Cleanser: Paula\'s Choice, Dr. Jart+\n‚Ä¢ Moisturizer: Krave Beauty, Purito\n‚Ä¢ Serum: Paula\'s Choice\n‚Ä¢ Sunscreen: Beauty of Joseon\n‚Ä¢ Exfoliant: Paula\'s Choice';
                    } else {
                        budgetMsg += 'Premium ($50+):\n‚Ä¢ Cleanser: SK-II, Est√©e Lauder\n‚Ä¢ Moisturizer: La Mer, SkinCeuticals\n‚Ä¢ Serum: SkinCeuticals C E Ferulic\n‚Ä¢ Sunscreen: La Roche-Posay Anthelios\n‚Ä¢ Exfoliant: Dr. Dennis Gross';
                    }
                    addBotMessage(budgetMsg);
                }, 1600);

                setTimeout(() => {
                    let analysis = 'üî¨ Why This Routine Works:\n\n';
                    if (skinType === 'Oily') {
                        analysis += 'Your skin produces excess sebum, which clogs pores and traps bacteria. This routine addresses that by:\n\n‚Ä¢ Oil-Control: Niacinamide reduces sebum production by up to 25%\n‚Ä¢ Deep Cleansing: Salicylic Acid penetrates pores to remove buildup\n‚Ä¢ Lightweight Texture: Heavy moisturizers worsen oiliness\n‚Ä¢ Mattifying Products: Keep shine at bay throughout the day\n\nThis prevents acne, blackheads, and that greasy appearance.';
                    } else if (skinType === 'Dry') {
                        analysis += 'Your skin lacks natural oils and lipids, making it vulnerable. This routine rebuilds your barrier by:\n\n‚Ä¢ Ceramides: Repair the damaged skin barrier and lock in moisture\n‚Ä¢ Hyaluronic Acid: Holds 1000x its weight in water for deep hydration\n‚Ä¢ Rich Creams: Provide occlusion to prevent water loss\n‚Ä¢ Nourishing Oils: Replenish depleted lipids\n\nThis prevents flaking, irritation, sensitivity, and premature aging.';
                    } else if (skinType === 'Combination') {
                        analysis += 'Your skin has different needs in different zones (oily T-zone, dry cheeks). This routine balances both by:\n\n‚Ä¢ Balancing Cleansers: Don\'t strip or leave residue\n‚Ä¢ Targeted Treatments: Oil-control serum for T-zone, hydrating for cheeks\n‚Ä¢ Flexible Moisturizers: Adjust based on season and skin state\n\nThis prevents over-treating one area while neglecting another.';
                    } else if (skinType === 'Normal') {
                        analysis += 'Your skin is naturally balanced, so this routine maintains that by:\n\n‚Ä¢ Preventative Care: Antioxidants like Vitamin C prevent future damage\n‚Ä¢ Maintenance Routine: Simple but consistent approach\n‚Ä¢ SPF Protection: Prevent sun damage before it starts\n\nThis maintains your healthy baseline and prevents future concerns.';
                    } else if (skinType === 'Sensitive') {
                        analysis += 'Your skin reacts easily to irritants and has a compromised barrier. This routine protects you by:\n\n‚Ä¢ Minimal Ingredients: Fragrance, alcohol, and strong actives trigger reactions\n‚Ä¢ Barrier Support: Ceramides and Panthenol strengthen protective layer\n‚Ä¢ Calming Actives: Centella Asiatica reduces inflammation naturally\n‚Ä¢ Patch Testing: Always test before full application\n\nThis prevents reactions, redness, and further damage.';
                    }
                    addBotMessage(analysis);
                }, 2400);

                setTimeout(() => {
                    let tips = '‚ú® Key Success Tips:\n\n‚Ä¢ Timeline: Allow 4-8 weeks to see results\n‚Ä¢ Introduce: One new active per week\n‚Ä¢ Patch Test: Test on inner arm first\n‚Ä¢ SPF: Essential every single day\n‚Ä¢ Consistency: This is the most important factor';
                    
                    if (skinType === 'Sensitive') {
                        tips += '\n\n‚ö†Ô∏è Sensitive Skin: Start with just cleanser + moisturizer for 2 weeks, then add treatments slowly.';
                    }
                    if (stress.includes('High')) {
                        tips += '\n\nüòå Stress: High stress increases cortisol. Add calming ingredients like Centella Asiatica.';
                    }
                    if (sunExposure.includes('Frequently')) {
                        tips += '\n\n‚òÄÔ∏è Sun Protection: Your high sun exposure makes SPF critical. Consider adding antioxidants.';
                    }
                    
                    tips += '\n\n---\n\nDisclaimer: My recommendations are educational and based on dermatological research. They are not medical advice. For persistent skin conditions, consult a dermatologist.\n\nCreated by Andy Park';
                    addBotMessage(tips);
                }, 4000);
            }, 1000);
        }

        function addBotMessage(text) {
            const msg = document.createElement('div');
            msg.className = 'message ai';
            msg.innerHTML = '<div class="message-bubble">' + text + '</div>';
            document.getElementById('chatMessages').appendChild(msg);
            scrollToBottom();
        }

        function addUserMessage(text) {
            const msg = document.createElement('div');
            msg.className = 'message user';
            msg.innerHTML = '<div class="message-bubble">' + text + '</div>';
            document.getElementById('chatMessages').appendChild(msg);
            scrollToBottom();
        }

        function scrollToBottom() {
            const container = document.getElementById('chatMessages');
            setTimeout(() => container.scrollTop = container.scrollHeight, 0);
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (!message) return;

            addUserMessage(input.value);
            input.value = '';

            addBotMessage('<div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div>');

            setTimeout(() => {
                const lastBubble = document.querySelectorAll('.message.ai:last-child .message-bubble')[0];
                let response = getResponse(message.toLowerCase());
                lastBubble.innerHTML = response;
            }, 1000);
        }

        function getResponse(message) {
            if (message.includes('love you')) {
                return 'I love you too! üíïüíïüíï';
            }
            if (message.includes('hi') || message.includes('hello')) {
                return 'Hello! üëã I\'m your skincare companion. How\'s your skin feeling today?';
            }
            if (message.includes('how are you')) {
                return 'I\'m glowing as always! ‚ú® How about you?';
            }
            if (message.includes('good morning')) {
                return 'Good morning! üåû Did you apply sunscreen today?';
            }
            if (message.includes('thank')) {
                return 'You\'re welcome! üíï Let me know if you have any other questions!';
            }
            if (message.includes('help')) {
                return 'I can help with:\n\n‚Ä¢ Skin type analysis\n‚Ä¢ Product recommendations\n‚Ä¢ Ingredient explanations\n‚Ä¢ Routine building\n‚Ä¢ Skincare concerns\n\nWhat would you like to know?';
            }
            return 'That\'s a great question! üíô\n\nI can help with skin type, routines, products, ingredients, and skincare concerns.\n\nWhat would you like to know?';
        }

        function renderFAQ() {
            const faqList = document.getElementById('faqList');
            faqList.innerHTML = '';
            faqs.forEach((faq) => {
                const item = document.createElement('div');
                item.className = 'faq-item';
                item.textContent = faq.q;
                item.onclick = () => selectFAQ(faq, item);
                faqList.appendChild(item);
            });
        }

        function selectFAQ(faq, element) {
            document.querySelectorAll('.faq-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            addUserMessage(faq.q);
            
            setTimeout(() => {
                addBotMessage(faq.a);
            }, 400);
        }

        function startNewChat() {
            initChat();
        }

        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        initChat();
    </script>
</body>
</html>
